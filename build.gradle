group 'ca.mcgill.science.ctf'

buildscript {
    ext.kotlin_version = '1.1.60'

    repositories {
        mavenCentral()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

apply plugin: 'java'
apply plugin: 'kotlin'
apply plugin: 'war'

sourceCompatibility = 1.8
war.baseName = 'tepid'

repositories {
    mavenCentral()
    maven { url "https://jitpack.io" }
}

dependencies {
    testCompile "junit:junit:4.12"
    testCompile "org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version"

    def jackson_version = "2.9.1"
    def glassfish_hk2_version = "2.5.0-b54"
    def glassfish_jersey_version = "2.26"
    def apache_log4j = "2.9.1"

    compile "com.fasterxml.jackson.core:jackson-annotations:$jackson_version"
    compile "com.fasterxml.jackson.core:jackson-databind:$jackson_version"
    compile "com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:$jackson_version"
    compile "com.fasterxml.jackson.module:jackson-module-jaxb-annotations:$jackson_version"
    compile "com.fasterxml.jackson.module:jackson-module-kotlin:$jackson_version"
    compile "com.github.ctf:TEPID-commons:06d31a0f55"
    compile "commons-beanutils:commons-beanutils:1.9.3"
    compile "javax.servlet:javax.servlet-api:4.0.0"
    compile "javax.ws.rs:javax.ws.rs-api:2.1"
    compile "org.apache.commons:commons-email:1.5"
    compile "org.apache.logging.log4j:log4j-api:$apache_log4j"
    compile "org.apache.logging.log4j:log4j-core:$apache_log4j"
    compile "org.glassfish.hk2.external:aopalliance-repackaged:$glassfish_hk2_version"
    compile "org.glassfish.hk2:hk2-locator:$glassfish_hk2_version"
    compile "org.glassfish.jersey.inject:jersey-hk2:$glassfish_jersey_version"
    compile "org.glassfish.jersey.containers:jersey-container-servlet:$glassfish_jersey_version"
    compile "org.glassfish.jersey.core:jersey-common:$glassfish_jersey_version"
    compile "org.glassfish.jersey.media:jersey-media-json-jackson:$glassfish_jersey_version"
    compile "org.ow2.asm:asm-debug-all:5.2"
    compile "org.tukaani:xz:1.6"
    compile "com.google.code.findbugs:jsr305:3.0.2"
    compile 'org.slf4j:slf4j-api:1.7.25'
    compile "org.apache.logging.log4j:log4j-web:$apache_log4j"

    compile group: 'javax.el', name: 'javax.el-api', version: '3.0.0'
    compile group: 'javax.servlet.jsp', name: 'javax.servlet.jsp-api', version: '2.3.1'

    compile "org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version"
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

test {
    dependsOn cleanTest
    testLogging.showStandardStreams = true
}

war {
    from('./') {
        include 'priv.properties'
    }
}
